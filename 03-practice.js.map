{"version":3,"file":"03-practice.js","sources":["../src/js/03-practice.js"],"sourcesContent":["import axios from 'axios';\n\nimport '../css/comon.css';\n/**\n * https://thecatapi.com/\n *\n * 1) Створити сторінку яка при завантаженні робить запит на бекенд * і отримує всі доступні breeds. https://api.thecatapi.com/v1/breeds\n *\n * 2) В інтерфейсі є форма пошуку з прив'язаним datalist з завантаженими breeds.\n *\n * 3) Користувач в формі вводить або обирає необхідний breed і при сабміті форми\n *  виконується GET запит за зображенням.\n *\n * 4) Після запиту під формою відображається картка з зображенням.\n *\n * 5) Під час запиту під формую відображається loader\n */\n\n\n\nconst form = document.querySelector(\"#search-form\");\nconst breedInput = document.querySelector(\"#breed-input\");\nconst breadList = document.querySelector(\"#breeds-list\");\nconst loader = document.querySelector(\"#loader\");\nconst catCard = document.querySelector(\"#cat-card\");\n\n\nform.addEventListener(\"submit\", handleSublit);\n\n\n\n\nfetchBreeds()\n\n\nfunction fetchBreeds(){\n    axios(\"https://api.thecatapi.com/v1/breeds\")\n        .then(res => {\n             console.log(res.data);\n             breadList.insertAdjacentHTML(\"beforeend\", createDataListOptions(res.data))\n        \n        })\n        .catch(error => {\n            console.log(error);\n            \n        })\n}\n\nfunction createDataListOptions(arr) {\n    return arr.map(({ id, name }) => `\n        <option value=\"${name}\" data-id=\"${id}\"></option>\n    \n    \n    `).join(\"\")\n}\n\n\nfunction handleSublit(event) {\n    event.preventDefault();\n    \n\n    const myBreed = breedInput.value;\n    const selectedBreed = [...breadList.options]\n    .find((option) => option.value.toLowerCase() === myBreed.toLowerCase().trim())\n\n    if(!selectedBreed) {\n        alert(\"Оберіть існуючу породу\");\n        return;\n    } \n    \n    \n    const breedId = selectedBreed.dataset.id;\n    loader.classList.remove(\"hidden\");\n    \n    axios(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n        .then(res => {\n            if(res.data.length > 0) {\n                const catUrl = res.data[0].url;\n\n                catCard.innerHTML = `\n                <div class=\"card\">\n                    <img src=\"${catUrl}\" alt=\"${myBreed}\" class=\"card-img\"/>\n                    <div class=\"card-title\">${myBreed}</div>\n                </div>\n                `\n            } else {\n                catCard.innerHTML = `\n                <p class=\"error-text\">Зображення не знайдено</p>\n                `\n            }\n            \n        })\n        .catch(error => {\n            console.log(error);\n            \n        })\n        .finally(() => {\n            loader.classList.add(\"hidden\");\n        })\n    \n\n\n}"],"names":["form","breedInput","breadList","loader","catCard","handleSublit","fetchBreeds","axios","res","createDataListOptions","error","arr","id","name","event","myBreed","selectedBreed","option","breedId","catUrl"],"mappings":"mFAoBA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAGlDJ,EAAK,iBAAiB,SAAUK,CAAY,EAK5CC,EAAa,EAGb,SAASA,GAAa,CAClBC,EAAM,qCAAqC,EACtC,KAAKC,GAAO,CACR,QAAQ,IAAIA,EAAI,IAAI,EACpBN,EAAU,mBAAmB,YAAaO,EAAsBD,EAAI,IAAI,CAAC,CAEtF,CAAS,EACA,MAAME,GAAS,CACZ,QAAQ,IAAIA,CAAK,CAE7B,CAAS,CACT,CAEA,SAASD,EAAsBE,EAAK,CAChC,OAAOA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAM,IAAK;AAAA,yBACZA,CAAI,cAAcD,CAAE;AAAA;AAAA;AAAA,KAGxC,EAAE,KAAK,EAAE,CACd,CAGA,SAASP,EAAaS,EAAO,CACzBA,EAAM,eAAc,EAGpB,MAAMC,EAAUd,EAAW,MACrBe,EAAgB,CAAC,GAAGd,EAAU,OAAO,EAC1C,KAAMe,GAAWA,EAAO,MAAM,YAAa,IAAKF,EAAQ,cAAc,MAAM,EAE7E,GAAG,CAACC,EAAe,CACf,MAAM,wBAAwB,EAC9B,MACH,CAGD,MAAME,EAAUF,EAAc,QAAQ,GACtCb,EAAO,UAAU,OAAO,QAAQ,EAEhCI,EAAM,wDAAwDW,CAAO,EAAE,EAClE,KAAKV,GAAO,CACT,GAAGA,EAAI,KAAK,OAAS,EAAG,CACpB,MAAMW,EAASX,EAAI,KAAK,CAAC,EAAE,IAE3BJ,EAAQ,UAAY;AAAA;AAAA,gCAEJe,CAAM,UAAUJ,CAAO;AAAA,8CACTA,CAAO;AAAA;AAAA,iBAGrD,MACgBX,EAAQ,UAAY;AAAA;AAAA,iBAKpC,CAAS,EACA,MAAMM,GAAS,CACZ,QAAQ,IAAIA,CAAK,CAE7B,CAAS,EACA,QAAQ,IAAM,CACXP,EAAO,UAAU,IAAI,QAAQ,CACzC,CAAS,CAIT"}